# ComputerGraphics-Universe
안양대학교 3학년 컴퓨터그래픽스 수업 은하계 만들기 과제

---

# OpenGL Solar System Simulation

OpenGL을 사용하여 태양계의 8개 행성과 달의 공전/자전, 그리고 궤적(Orbit Trail)을 시뮬레이션하는 프로젝트입니다. HDR 렌더링과 Bloom(빛 번짐) 효과가 적용되어 있습니다.

## 📁 주요 메서드 설명

### 1. `createSphere` / `createQuad`
- **기능**: 렌더링에 사용할 3D 모델(구체, 사각형)의 정점(Vertex) 데이터를 생성합니다.
- **역할**: 
  - `Sphere`: 태양과 행성들을 그릴 때 사용합니다.
  - `Quad`: 전체 화면에 후처리 효과(Bloom, 합성)를 적용할 때 사용합니다.

### 2. `createPlanetParams` / `createSatelliteParams`
- **기능**: 행성과 위성의 물리적/시각적 속성을 설정하는 구조체를 생성합니다.
- **매개변수**: 이름, 반지름, 공전 거리, 이심률, 공전 주기, 자전 속도, 텍스처 경로.
- **장점**: 복잡한 파라미터 설정을 함수 하나로 캡슐화하여 코드 가독성을 높입니다.

### 3. `setupSolarSystem`
- **기능**: 태양(Sun) 객체에 수성부터 해왕성까지 8개 행성과 위성(달)을 생성하여 등록합니다.
- **내용**: 앞서 만든 `createParams` 함수를 사용하여 각 행성의 고유 데이터를 입력합니다.

### 4. `renderPlanet`
- **기능**: 단일 행성을 그리는 렌더링 함수입니다.
- **동작**: 자전 각도를 업데이트하고, 텍스처를 바인딩하며, 모델 행렬(크기, 위치)을 계산하여 쉐이더에 전달한 뒤 그립니다.

### 5. `updatePlanetPhysics`
- **기능**: 행성의 공전 위치를 계산하고 궤적(Trail)을 기록합니다.
- **특징**: 위성(달)이 있는 경우, 행성과 위성의 질량 중심(Barycenter)을 고려하여 행성의 위치를 미세하게 조정합니다.

---

## 🚀 Main 함수 로직 설명

`main` 함수는 초기화와 무한 루프(Game Loop)로 구성됩니다.

### 1. 초기화 단계
- **Window & OpenGL**: GLFW 창 생성 및 GLEW 초기화.
- **Shader & Resource**: 쉐이더 컴파일, 텍스처 로딩, 구체/사각형 모델 생성.
- **Solar System**: `setupSolarSystem()`을 호출하여 태양계 객체 구조 완성.
- **Framebuffers**: HDR(고명암비) 효과와 Bloom(블러) 처리를 위한 메모리 버퍼 생성.

### 2. 렌더링 루프 (While Loop)
매 프레임마다 다음 4단계(Pass)를 거쳐 화면을 그립니다.

#### **Pass 1: 장면 렌더링 (HDR)**
- 태양을 먼저 그립니다.
- `sun.getPlanets()`로 **모든 행성을 순회(For Loop)**합니다.
  1. `updatePlanetPhysics()`로 현재 위치 계산 및 궤적 저장.
  2. 행성 이름에 맞는 텍스처 선택.
  3. `renderPlanet()` 호출하여 그리기.
  4. 위성이 있다면 달의 위치를 계산해 추가로 그리기.

#### **Pass 2: 블러 처리 (Bloom)**
- Pass 1에서 추출한 '밝은 빛' 텍스처를 가로/세로 방향으로 여러 번 번갈아 가며 블러 처리합니다 (Ping-Pong 방식).

#### **Pass 3: 최종 합성**
- 검은 배경에 우주(Skybox)를 먼저 그립니다.
- 그 위에 Pass 1(원본 장면)과 Pass 2(블러 된 빛)를 합쳐서(Additive Blending) 최종 결과물을 만듭니다.

#### **Pass 4: 궤적 그리기**
- 다시 모든 행성을 순회하며, 지금까지 이동해온 경로(Trail)를 선으로 그립니다.
